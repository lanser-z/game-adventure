# 茶叶蛋大冒险 - 微信小游戏发布指南

## 项目简介

茶叶蛋大冒险是一款使用 Phaser 3 开发的益智解谜游戏，已适配微信小游戏平台。

## 发布到微信小游戏平台

### 前提准备

1. 下载并安装 [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
2. 注册微信小程序账号（如果没有AppID，可以使用测试号）

### 构建步骤

```bash
# 1. 安装依赖
npm install

# 2. 构建微信小游戏版本
npm run build:wechat

# 构建完成后，dist-wechat/ 目录包含所有需要的文件
```

### 发布步骤

1. **打开微信开发者工具**

2. **导入项目**
   - 选择 "小游戏"
   - 点击 "导入项目"
   - 选择项目根目录下的 `dist-wechat/` 文件夹
   - 填写 AppID（测试模式可以选择"测试号"）
   - 点击 "导入"

3. **预览测试**
   - 在微信开发者工具中点击 "预览"
   - 使用微信扫描二维码
   - 在手机上测试游戏

4. **上传发布**
   - 在微信开发者工具中点击 "上传"
   - 填写版本号和备注
   - 登录 [微信公众平台](https://mp.weixin.qq.com/)
   - 进入 "开发管理" -> "开发版本"
   - 提交审核
   - 审核通过后点击 "发布"

## 平台适配功能

游戏已针对微信小游戏平台做了以下适配：

### 数据存储
- 使用 `wx.setStorageSync` / `wx.getStorageSync` 存储游戏进度
- 自动适配，在Web环境使用 localStorage

### 分享功能
- 支持分享给好友
- 支持分享到朋友圈
- 自定义分享标题和图片

### 性能优化
- 内存警告监听
- 资源按需加载
- 代码分包支持

### 系统适配
- 屏幕自适应
- 横竖屏支持
- 状态栏隐藏

## 开发调试

### 本地开发

```bash
npm run dev
```

### 查看日志

- 微信开发者工具的 Console 面板
- 真机调试：使用 `vconsole` 或查看远程调试日志

### 注意事项

1. **包体积限制**：微信小游戏主包限制 4MB，总包限制 20MB
2. **资源加载**：所有资源必须通过网络加载，不能使用本地文件
3. **音频格式**：建议使用 mp3 格式
4. **网络请求**：需要配置合法域名

## 目录结构

```
dist-wechat/
├── assets/          # 游戏资源
├── index.js         # 入口文件
├── index.html       # HTML 文件
├── game.js          # 微信小游戏配置
└── sitemap.json     # 搜索配置
```

## 其他平台适配

项目同样支持发布到以下平台：

- **抖音小游戏** - 类似微信，使用相同的构建流程
- **支付宝小游戏** - 使用支付宝开发者工具

## 问题反馈

如有问题，请检查：
1. 微信开发者工具 Console 是否有报错
2. 网络请求是否成功
3. 资源文件是否正确加载
